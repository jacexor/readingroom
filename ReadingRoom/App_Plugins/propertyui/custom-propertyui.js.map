{"version":3,"file":"custom-propertyui.js","sources":["../../../custom-propertyui/src/my-element.ts"],"sourcesContent":["import { html, customElement, property, state, ifDefined } from '@umbraco-cms/backoffice/external/lit';\nimport { UmbLitElement } from '@umbraco-cms/backoffice/lit-element';\nimport { UmbChangeEvent } from '@umbraco-cms/backoffice/event';\nimport { UMB_VALIDATION_EMPTY_LOCALIZATION_KEY } from '@umbraco-cms/backoffice/validation';\nimport type { \n    UmbPropertyEditorUiElement, \n    UmbPropertyEditorConfigCollection \n} from '@umbraco-cms/backoffice/property-editor';\n\n/**\n * Property Editor UI for a text box with configurable max length\n */\n@customElement('umb-property-editor-ui-text-box')\nexport default class UmbPropertyEditorUITextBoxElement \n    extends UmbLitElement \n    implements UmbPropertyEditorUiElement {\n    \n    /**\n     * The current value of the property.\n     * Automatically set by Umbraco and updated when the user types.\n     */\n    @property()\n    value?: string;\n\n    /**\n     * Indicates if the property is required/mandatory.\n     * Automatically set by Umbraco based on Document Type property settings.\n     */\n    @property({ type: Boolean })\n    mandatory?: boolean;\n\n    /**\n     * Custom validation message when a mandatory field is empty.\n     * Set in the Document Type property settings in the backoffice.\n     * Defaults to a localized \"This field is required\" message.\n     */\n    @property({ type: String })\n    mandatoryMessage = UMB_VALIDATION_EMPTY_LOCALIZATION_KEY;\n\n    /**\n     * Indicates if the Property Editor is in read-only mode.\n     * Set automatically by Umbraco based on user permissions, content locks, etc.\n     * When true, the value can be read and selected but not modified.\n     */\n    @property({ type: Boolean })\n    readonly?: boolean;\n\n    /**\n     * Maximum allowed characters for the text input.\n     * Configured via the Data Type settings.\n     */\n    @state()\n    private maxLength?: number;\n\n    /**\n     * Configuration from the Data Type.\n     * Automatically set by Umbraco when the Property Editor is initialized.\n     * Extracts settings like maxLength for use in the UI.\n     */\n    @property({ attribute: false })\n    public set config(config: UmbPropertyEditorConfigCollection | undefined) {\n        if (!config) return;\n        this.maxLength = config.getValueByAlias<number>(\"maxLength\") ?? undefined;\n    }\n\n    /**\n     * Handles input events from the text box.\n     * Updates the value and notifies Umbraco of the change.\n     */\n    #onInput(e: InputEvent) {\n        const newValue = (e.target as HTMLInputElement).value;\n        if (newValue === this.value) return;\n        \n        // Update the value\n        this.value = newValue;\n        \n        // Notify Umbraco that the value has changed\n        this.dispatchEvent(new UmbChangeEvent());\n    }\n\n    /**\n     * Renders the text input with all configured properties\n     */\n    override render() {\n        return html`<uui-input \n                        type=\"text\"\n                        .value=${this.value ?? ''}\n                        maxlength=${ifDefined(this.maxLength)}\n                        ?required=${this.mandatory}\n                        .requiredMessage=${this.mandatoryMessage}\n                        ?readonly=${this.readonly}\n                        @input=${this.#onInput}></uui-input>`;\n    }\n}\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'umb-property-editor-ui-text-box': UmbPropertyEditorUITextBoxElement;\n    }\n}"],"names":["_UmbPropertyEditorUITextBoxElement_instances","onInput_fn","UmbPropertyEditorUITextBoxElement","UmbLitElement","__privateAdd","UMB_VALIDATION_EMPTY_LOCALIZATION_KEY","config","html","ifDefined","__privateMethod","e","newValue","UmbChangeEvent","__decorateClass","property","state","customElement"],"mappings":";;;;;;;;;;8OAAAA,GAAAC;AAaA,IAAqBC,IAArB,cACYC,EAC8B;AAAA,EAF1C,cAAA;AAAA,UAAA,GAAA,SAAA,GAAAC,EAAA,MAAAJ,CAAA,GAwBI,KAAA,mBAAmBK;AAAA,EAAA;AAAA,EAuBnB,IAAW,OAAOC,GAAuD;AACrE,IAAKA,MACL,KAAK,YAAYA,EAAO,gBAAwB,WAAW,KAAK;AAAA,EACpE;AAAA;AAAA;AAAA;AAAA,EAoBS,SAAS;AACd,WAAOC;AAAA;AAAA,iCAEkB,KAAK,SAAS,EAAE;AAAA,oCACbC,EAAU,KAAK,SAAS,CAAC;AAAA,oCACzB,KAAK,SAAS;AAAA,2CACP,KAAK,gBAAgB;AAAA,oCAC5B,KAAK,QAAQ;AAAA,iCAChBC,QAAKT,GAAAC,CAAA,CAAQ;AAAA,EAC1C;AACJ;AAhFAD,IAAA,oBAAA,QAAA;AAwDIC,IAAQ,SAACS,GAAe;AACpB,QAAMC,IAAYD,EAAE,OAA4B;AAChD,EAAIC,MAAa,KAAK,UAGtB,KAAK,QAAQA,GAGb,KAAK,cAAc,IAAIC,GAAgB;AAC3C;AAxDAC,EAAA;AAAA,EADCC,EAAA;AAAS,GAROZ,EASjB,WAAA,SAAA,CAAA;AAOAW,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAA,CAAS;AAAA,GAfVZ,EAgBjB,WAAA,aAAA,CAAA;AAQAW,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,OAAA,CAAQ;AAAA,GAvBTZ,EAwBjB,WAAA,oBAAA,CAAA;AAQAW,EAAA;AAAA,EADCC,EAAS,EAAE,MAAM,QAAA,CAAS;AAAA,GA/BVZ,EAgCjB,WAAA,YAAA,CAAA;AAOQW,EAAA;AAAA,EADPE,EAAA;AAAM,GAtCUb,EAuCT,WAAA,aAAA,CAAA;AAQGW,EAAA;AAAA,EADVC,EAAS,EAAE,WAAW,GAAA,CAAO;AAAA,GA9CbZ,EA+CN,WAAA,UAAA,CAAA;AA/CMA,IAArBW,EAAA;AAAA,EADCG,EAAc,iCAAiC;AAAA,GAC3Bd,CAAA;"}