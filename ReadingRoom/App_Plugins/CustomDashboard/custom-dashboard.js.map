{"version":3,"file":"custom-dashboard.js","sources":["../../../custom-dashboard/src/my-element.ts"],"sourcesContent":["import { LitElement, html, customElement, state } from \"@umbraco-cms/backoffice/external/lit\";\nimport { UmbElementMixin } from '@umbraco-cms/backoffice/element-api';\nimport { UMB_AUTH_CONTEXT } from '@umbraco-cms/backoffice/auth';\n\n@customElement('custom-dashboard-element')\nexport default class CustomDashboardElement extends UmbElementMixin(LitElement) {\n \t@state()\n    private _data: Array<any> = [];\n\n\t private async _fetchData() {\n\t\tconst authContext = await this.getContext(UMB_AUTH_CONTEXT);\n\t\tconst token = await authContext?.getLatestToken();\n\n\t\tconst response = await fetch('/umbraco/management/api/v1/articles', {\n\t\t\theaders: {\n\t\t\t\t'Authorization': `Bearer ${token}`,\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t});\n\n\t\tif (response.ok) {\n\t\t\tvar result = await response.json();\n\t\t\tthis._data = result[\"items\"];\n\t\t\tconsole.log(result[\"items\"]);\n\t\t} else {\n\t\t\t// Error handling\n\t\t\tconsole.error(\"Failed to fetch node data\");\n\t\t}\n\t};\n\n\trender() {\n\t\treturn html`\n\t\t\t<uui-box>\n            ${this._data.length > 0 ? html`<uui-table>\n                <uui-table-head>\n                    <uui-table-row>\n                        <uui-table-header-cell>Id</uui-table-header-cell>\n                        <uui-table-header-cell>Name</uui-table-header-cell>\n                        <uui-table-header-cell>Email</uui-table-header-cell>\n                    </uui-table-row>\n                </uui-table-head>\n                <uui-table-body>\n                    ${this._data.map(item => html`\n                        <uui-table-row>\n                            <uui-table-cell>${item[\"id\"]}</uui-table-cell>\n                            <uui-table-cell>${item[\"name\"]}</uui-table-cell>\n                            <uui-table-cell>${item[\"updateDate\"]}</uui-table-cell>\n                        </uui-table-row>\n                    `)}\n                </uui-table-body>\n            </uui-table>\n\t\t\t` : html`\n                <p>Click the button to load data.</p>\n\t\t\t<uui-button label=\"Click me\" id=\"clickMe\" look=\"secondary\" @click=\"${this._fetchData}\"></uui-button>\n\t\t\t</uui-box>`}`;\n\t}\n}\n\n\ndeclare global {\n    interface HTMLElementTagNameMap {\n        'custom-dashboard-element': CustomDashboardElement;\n    }\n}"],"names":["CustomDashboardElement","UmbElementMixin","LitElement","token","UMB_AUTH_CONTEXT","response","result","html","item","__decorateClass","state","customElement"],"mappings":";;;;;;;;AAKA,IAAqBA,IAArB,cAAoDC,EAAgBC,CAAU,EAAE;AAAA,EAAhF,cAAA;AAAA,UAAA,GAAA,SAAA,GAEI,KAAQ,QAAoB,CAAA;AAAA,EAAC;AAAA,EAE/B,MAAc,aAAa;AAE3B,UAAMC,IAAQ,OADM,MAAM,KAAK,WAAWC,CAAgB,IACzB,eAAA,GAE3BC,IAAW,MAAM,MAAM,uCAAuC;AAAA,MACnE,SAAS;AAAA,QACR,eAAiB,UAAUF,CAAK;AAAA,QAChC,gBAAgB;AAAA,MAAA;AAAA,IACjB,CACA;AAED,QAAIE,EAAS,IAAI;AAChB,UAAIC,IAAS,MAAMD,EAAS,KAAA;AAC5B,WAAK,QAAQC,EAAO,OACpB,QAAQ,IAAIA,EAAO,KAAQ;AAAA,IAC5B;AAEC,cAAQ,MAAM,2BAA2B;AAAA,EAE3C;AAAA,EAEA,SAAS;AACR,WAAOC;AAAA;AAAA,cAEK,KAAK,MAAM,SAAS,IAAIA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAShB,KAAK,MAAM,IAAI,CAAAC,MAAQD;AAAA;AAAA,8CAECC,EAAK,EAAK;AAAA,8CACVA,EAAK,IAAO;AAAA,8CACZA,EAAK,UAAa;AAAA;AAAA,qBAE3C,CAAC;AAAA;AAAA;AAAA,OAGfD;AAAA;AAAA,wEAEiE,KAAK,UAAU;AAAA,cACzE;AAAA,EACb;AACD;AAjDYE,EAAA;AAAA,EADTC,EAAA;AAAM,GADYV,EAET,WAAA,SAAA,CAAA;AAFSA,IAArBS,EAAA;AAAA,EADCE,EAAc,0BAA0B;AAAA,GACpBX,CAAA;"}